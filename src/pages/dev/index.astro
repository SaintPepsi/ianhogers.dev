---
import Base from '../../layouts/Base.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('dev'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Base title="Dev â€” Ian Hogers" side="dev">
  <h1 class="text-3xl md:text-4xl mb-2">Dev</h1>
  <p class="text-gray-500 font-mono text-sm mb-8">Code, agents, AI, and engineering notes.</p>
  {posts.length === 0 && <p class="text-gray-600 font-mono">Nothing here yet. Check back soon.</p>}
  <ul class="space-y-8">
    {posts.map((post) => (
      <li>
        <a href={`/dev/${post.id}/`} class="group no-underline block">
          <p class="font-mono text-sm text-gray-500 mb-1">
            {post.data.date.toLocaleDateString('en-AU', { year: 'numeric', month: 'long', day: 'numeric' })}
          </p>
          <h2 class="text-xl text-white group-hover:text-purple-300 transition-colors mb-1">{post.data.title}</h2>
          <p class="text-gray-400 text-sm">{post.data.description}</p>
        </a>
      </li>
    ))}
  </ul>
</Base>
