---
// GalleryGroup.astro — a titled cluster within a collage gallery
// Contains CollageItem children. Groups flow horizontally within Gallery.
// Props:
//   title  — heading text (always displayed on top)
//   tilt   — group-level rotation in degrees for diagonal feel
//   align  — "start" | "center" | "end" for photo cluster alignment
interface Props {
  title: string;
  tilt?: number;
  align?: 'start' | 'center' | 'end';
  position?: 'left' | 'right' | 'center';
  class?: string;
}
const { title, tilt, align = 'start', position = 'center', class: className = '' } = Astro.props;

const groupStyle = tilt ? `--gg-tilt: ${tilt}deg` : '';
---

<section
  class:list={['gallery-group', `gallery-group--pos-${position}`, { 'gallery-group--tilted': tilt }, className]}
  style={groupStyle || undefined}
>
  <h3 class="gallery-group-title">{title}</h3>
  <div class:list={['gallery-group-items', `gallery-group-items--${align}`]}>
    <slot />
  </div>
</section>

<style>
  .gallery-group {
    flex: 0 1 auto;
    min-width: 0;
    padding: 0.5rem;
    max-width: 90%;
  }

  .gallery-group--pos-left {
    align-self: flex-start;
    margin-left: 2%;
    margin-right: auto;
  }

  .gallery-group--pos-right {
    align-self: flex-end;
    margin-left: 50%;
    margin-right: 2%;
  }

  .gallery-group--pos-center {
    align-self: center;
  }

  .gallery-group--tilted {
    transform: rotate(var(--gg-tilt, 0deg));
    transform-origin: center center;
  }

  .gallery-group-title {
    font-family: 'Weiholmir', cursive;
    color: var(--accent, #f59e0b);
    font-size: 1.4rem;
    margin: 0 0 0.75rem 0;
    padding-left: 0.5rem;
    border-left: 3px solid var(--accent, #f59e0b);
  }

  .gallery-group-items {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
    padding: 0.5rem 0;
    justify-items: center;
  }

  /* Third item spans full width and centers — forms the triangle base */
  .gallery-group-items :global(:nth-child(3)) {
    grid-column: 1 / -1;
    justify-self: center;
  }

  .gallery-group-items--center {
    justify-items: center;
  }
  .gallery-group-items--end {
    justify-items: end;
  }

  /* Reset MDX <p> wrappers if used inside MDX */
  .gallery-group-items :global(> p) {
    margin: 0;
    display: contents;
  }

  @media (max-width: 767px) {
    .gallery-group--tilted {
      transform: none;
    }
    .gallery-group--pos-left,
    .gallery-group--pos-right {
      margin-left: auto;
      margin-right: auto;
      align-self: center;
      max-width: 100%;
    }
    .gallery-group-items {
      grid-template-columns: 1fr;
    }
    .gallery-group-items :global(:nth-child(3)) {
      grid-column: auto;
    }
  }
</style>
