---
// GalleryGroup.astro — a headed section within a collage gallery
// Usage: <GalleryGroup title="Cinnamon Scrolls"> <img .../> </GalleryGroup>
// Also supports div-wrapped items (pixel-box cards with captions).
interface Props {
  title: string;
}
const { title } = Astro.props;
---

<section class="gallery-group">
  <h3 class="gallery-group-title">{title}</h3>
  <div class="gallery-group-photos">
    <slot />
  </div>
</section>

<style>
  .gallery-group {
    margin-bottom: 2.5rem;
  }

  .gallery-group-title {
    font-family: 'Weiholmir', cursive;
    color: var(--accent, #f59e0b);
    font-size: 1.5rem;
    margin-bottom: 1rem;
    padding-left: 0.5rem;
    border-left: 3px solid var(--accent, #f59e0b);
  }

  .gallery-group-photos {
    display: flex;
    flex-wrap: wrap;
    gap: 0;
    padding: 1rem 0.5rem;
    position: relative;
  }

  /* ── Bare images (MDX ![alt](src) or <img>) ── */
  .gallery-group-photos :global(img),
  .gallery-group-photos :global(p > img) {
    width: 220px;
    height: auto;
    border-radius: 0.5rem;
    margin: -0.5rem;
    box-shadow:
      0 4px 16px rgba(0, 0, 0, 0.5),
      0 0 0 3px #1e1a28,
      0 0 0 4px rgba(255, 255, 255, 0.08);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), z-index 0s, box-shadow 0.3s ease;
    position: relative;
    z-index: 1;
    cursor: pointer;
    object-fit: cover;
  }

  /* ── Div-wrapped items (pixel-box cards with captions) ── */
  .gallery-group-photos :global(> div) {
    width: 220px;
    margin: -0.5rem;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), z-index 0s, box-shadow 0.3s ease;
    position: relative;
    z-index: 1;
    cursor: pointer;
  }

  /* Images inside div wrappers fill their container */
  .gallery-group-photos :global(> div img) {
    width: 100%;
    height: auto;
    margin: 0;
    box-shadow: none;
  }

  /* ── Varied rotations for collage scatter ── */
  .gallery-group-photos :global(:nth-child(4n+1)) {
    transform: rotate(-3deg);
  }
  .gallery-group-photos :global(:nth-child(4n+2)) {
    transform: rotate(2deg);
  }
  .gallery-group-photos :global(:nth-child(4n+3)) {
    transform: rotate(-1.5deg);
  }
  .gallery-group-photos :global(:nth-child(4n)) {
    transform: rotate(4deg);
  }

  /* ── Hover: lift to front, straighten, scale up ── */
  .gallery-group-photos :global(img:hover),
  .gallery-group-photos :global(p > img:hover) {
    transform: rotate(0deg) scale(1.08) !important;
    z-index: 10;
    box-shadow:
      0 12px 40px rgba(0, 0, 0, 0.7),
      0 0 0 3px #1e1a28,
      0 0 0 4px var(--accent, #f59e0b);
  }

  .gallery-group-photos :global(> div:hover) {
    transform: rotate(0deg) scale(1.08) !important;
    z-index: 10;
  }

  /* Reset MDX <p> wrappers */
  .gallery-group-photos :global(p) {
    margin: 0;
    display: contents;
  }

  /* ── Responsive sizing ── */
  @media (min-width: 640px) {
    .gallery-group-photos :global(img),
    .gallery-group-photos :global(p > img),
    .gallery-group-photos :global(> div) {
      width: 260px;
    }
  }

  @media (min-width: 768px) {
    .gallery-group-photos :global(img),
    .gallery-group-photos :global(p > img),
    .gallery-group-photos :global(> div) {
      width: 300px;
      margin: -0.75rem;
    }
  }

  @media (min-width: 1024px) {
    .gallery-group-photos :global(img),
    .gallery-group-photos :global(p > img),
    .gallery-group-photos :global(> div) {
      width: 340px;
    }
  }
</style>
