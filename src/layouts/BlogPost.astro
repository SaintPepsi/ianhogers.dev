---
import Base from './Base.astro';

interface Props {
  title: string;
  description: string;
  date: Date;
  tags: string[];
  side: 'dev' | 'personal';
}

const { title, description, date, tags, side } = Astro.props;
const formattedDate = date.toLocaleDateString('en-AU', { year: 'numeric', month: 'long', day: 'numeric' });
const sideIcon = side === 'dev' ? '/assets/pixel-art/game-assets/wow_blue.png' : '/assets/pixel-art/decorative/sample-bunny.png';
---

<Base title={`${title} - Ian Hogers`} description={description} side={side}>
  <article class="py-4">
    <p class="font-mono text-sm mb-6">
      <a href={`/${side}`} class="accent-text no-underline hover:underline inline-flex items-center gap-2">
        <img src="/assets/pixel-art/ui/green_up_arrow_tiny.png" alt="" class="pixel-sprite w-3 h-3 -rotate-90" />
        back to {side === 'dev' ? 'dev' : 'life'}
      </a>
    </p>

    <header class="pixel-box p-6 mb-8">
      <div class="flex items-center gap-3 mb-3">
        <img src={sideIcon} alt="" class="pixel-sprite w-5 h-5" />
        <p class="font-mono text-xs text-gray-500 mb-0">{formattedDate}</p>
      </div>
      <h1 class="text-3xl md:text-4xl mb-3">{title}</h1>
      <p class="text-gray-400 mb-0">{description}</p>
      {tags.length > 0 && (
        <div class="flex flex-wrap gap-2 mt-4">
          {tags.map((tag) => (
            <span class="text-xs font-mono bg-surface-light px-2 py-1 rounded accent-text">{tag}</span>
          ))}
        </div>
      )}
    </header>

    <div class="prose">
      <slot />
    </div>

    <div class="pixel-divider mt-12 mb-6" style="--divider-color: #2a2438;"></div>
    <p class="text-xs font-mono text-gray-600 flex items-center gap-2">
      <img src="/assets/pixel-art/decorative/star_grow.png" alt="" class="pixel-sprite w-4 h-4 animate-sparkle opacity-40" />
      Thanks for reading.
    </p>
  </article>
</Base>
